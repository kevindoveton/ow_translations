"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TranslationRowType = void 0;

var _template = require("./template");

var _Types = require("./Types");

var fs = require('fs');

/**
 * Parser pulls down the translations from Google sheets, and puts them
 * in the right fields.
 */
var request = require('request-promise-native');

var TranslationRowType;
exports.TranslationRowType = TranslationRowType;

(function (TranslationRowType) {
  TranslationRowType["string"] = "string";
  TranslationRowType["function"] = "function";
})(TranslationRowType || (exports.TranslationRowType = TranslationRowType = {}));

function writeFile(path, contents) {
  return new Promise(function (resolve, reject) {
    fs.writeFile(path, contents, function (err) {
      if (err) {
        return reject(err);
      }

      resolve();
    });
  });
}

function sanitize(input) {
  // return input.replace('"', "'");
  return input.replace(/"/g, "'");
}

function run() {
  //https://docs.google.com/spreadsheets/d/e/2PACX-1vSHp6u_WXM18NB9RqPfiaKugHdT_zhHP5NQlZYStzRJfnwFJPlfwTSYtAGJvP1axvhZ8WifYJcE8RAJ/pubhtml
  var sheetsId = "102zLqEWj4xlqqNgVUFCiMLqdcvaLY6GntS1xmlHdAE8";
  var url = "https://spreadsheets.google.com/feeds/list/".concat(sheetsId, "/default/public/values?alt=json;");
  var options = {
    method: 'GET',
    url: url,
    qs: {
      alt: 'json'
    },
    headers: {
      'Cache-Control': 'no-cache'
    },
    json: true
  };
  return request(options).then(function (response) {
    var perRowTranslations = [];
    response.feed.entry.forEach(function (r) {
      var row = {
        id: r.title.$t,
        type: r.gsx$type.$t,
        en_AU: r.gsx$enau.$t,
        en_US: r.gsx$enus.$t,
        guj_IN: r.gsx$gujin.$t,
        hi_IN: r.gsx$hiin.$t,
        test_UPPER: r.gsx$testupper.$t,
        fr_FR: r.gsx$frfr.$t,
        es_ES: sanitize(r.gsx$eses.$t)
      };
      perRowTranslations.push(row);
    }); //Now that we have the rows, write the files!

    var en_AU = {};
    var en_US = {};
    var guj_IN = {};
    var hi_IN = {};
    var fr_FR = {};
    var es_ES = {};
    var test_UPPER = {};
    perRowTranslations.forEach(function (row) {
      return en_AU[row.id] = [row.en_AU, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return en_US[row.id] = [row.en_US, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return guj_IN[row.id] = [row.guj_IN, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return hi_IN[row.id] = [row.hi_IN, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return fr_FR[row.id] = [row.fr_FR, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return es_ES[row.id] = [row.es_ES, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return test_UPPER[row.id] = [row.test_UPPER, row.type];
    });
    var en_AU_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.en_AU, en_AU);
    var en_US_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.en_US, en_US);
    var uj_IN_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.guj_IN, guj_IN);
    var hi_IN_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.hi_IN, hi_IN);
    var test_UPPER_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.test_UPPER, test_UPPER);
    var fr_FR_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.fr_FR, fr_FR);
    var es_ES_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.es_ES, es_ES);
    return Promise.all([writeFile('./src/common/en_AU.ts', en_AU_file), writeFile('./src/common/en_US.ts', en_US_file), writeFile('./src/common/guj_IN.ts', uj_IN_file), writeFile('./src/common/hi_IN.ts', hi_IN_file), writeFile('./src/common/test_UPPER.ts', test_UPPER_file), writeFile('./src/common/fr_FR.ts', fr_FR_file), writeFile('./src/common/es_ES.ts', es_ES_file)]).catch(function (err) {
      return console.error(err);
    });
  }).catch(function (err) {
    return console.error(err);
  });
}

run();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXJzZXIudHMiXSwibmFtZXMiOlsiZnMiLCJyZXF1aXJlIiwicmVxdWVzdCIsIlRyYW5zbGF0aW9uUm93VHlwZSIsIndyaXRlRmlsZSIsInBhdGgiLCJjb250ZW50cyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZXJyIiwic2FuaXRpemUiLCJpbnB1dCIsInJlcGxhY2UiLCJydW4iLCJzaGVldHNJZCIsInVybCIsIm9wdGlvbnMiLCJtZXRob2QiLCJxcyIsImFsdCIsImhlYWRlcnMiLCJqc29uIiwidGhlbiIsInJlc3BvbnNlIiwicGVyUm93VHJhbnNsYXRpb25zIiwiZmVlZCIsImVudHJ5IiwiZm9yRWFjaCIsInIiLCJyb3ciLCJpZCIsInRpdGxlIiwiJHQiLCJ0eXBlIiwiZ3N4JHR5cGUiLCJlbl9BVSIsImdzeCRlbmF1IiwiZW5fVVMiLCJnc3gkZW51cyIsImd1al9JTiIsImdzeCRndWppbiIsImhpX0lOIiwiZ3N4JGhpaW4iLCJ0ZXN0X1VQUEVSIiwiZ3N4JHRlc3R1cHBlciIsImZyX0ZSIiwiZ3N4JGZyZnIiLCJlc19FUyIsImdzeCRlc2VzIiwicHVzaCIsImVuX0FVX2ZpbGUiLCJUcmFuc2xhdGlvbkVudW0iLCJlbl9VU19maWxlIiwidWpfSU5fZmlsZSIsImhpX0lOX2ZpbGUiLCJ0ZXN0X1VQUEVSX2ZpbGUiLCJmcl9GUl9maWxlIiwiZXNfRVNfZmlsZSIsImFsbCIsImNhdGNoIiwiY29uc29sZSIsImVycm9yIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBQ0E7O0FBRkEsSUFBTUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsSUFBRCxDQUFsQjs7QUFJQTs7OztBQUtBLElBQU1DLE9BQU8sR0FBR0QsT0FBTyxDQUFDLHdCQUFELENBQXZCOztJQW9EWUUsa0I7OztXQUFBQSxrQjtBQUFBQSxFQUFBQSxrQjtBQUFBQSxFQUFBQSxrQjtHQUFBQSxrQixrQ0FBQUEsa0I7O0FBc0JaLFNBQVNDLFNBQVQsQ0FBbUJDLElBQW5C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QXZETSxFQXdETmtELEtBeERNLENBd0RBLFVBQUNsRCxHQUFEO0FBQUEsV0FBY21ELE9BQU8sQ0FBQ0MsS0FBUixDQUFjcEQsR0FBZCxDQUFkO0FBQUEsR0F4REEsQ0FBUDtBQXlERDs7QUFFREksR0FBRyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmltcG9ydCB7IGZpbGVGb3JUcmFuc2xhdGlvbnMgfSBmcm9tIFwiLi90ZW1wbGF0ZVwiO1xuaW1wb3J0IHsgVHJhbnNsYXRpb25FbnVtIH0gZnJvbSBcIi4vVHlwZXNcIjtcblxuLyoqXG4gKiBQYXJzZXIgcHVsbHMgZG93biB0aGUgdHJhbnNsYXRpb25zIGZyb20gR29vZ2xlIHNoZWV0cywgYW5kIHB1dHMgdGhlbVxuICogaW4gdGhlIHJpZ2h0IGZpZWxkcy5cbiAqL1xuXG5jb25zdCByZXF1ZXN0ID0gcmVxdWlyZSgncmVxdWVzdC1wcm9taXNlLW5hdGl2ZScpO1xuXG5leHBvcnQgdHlwZSBTaGVldHNSZXNwb25zZSA9IHtcbiAgdmVyc2lvbjogc3RyaW5nLFxuICBlbmNvZGluZzogc3RyaW5nLFxuICBmZWVkOiBTaGVldHNGZWVkLFxufVxuXG5leHBvcnQgdHlwZSBTaGVldHNGZWVkID0ge1xuICB0aXRsZTogc3RyaW5nLFxuICB1cGRhdGVkOiBzdHJpbmcsXG4gIGVudHJ5OiBTaGVldHNSb3dbXSxcbn1cblxuZXhwb3J0IHR5cGUgU2hlZXRzUm93ID0ge1xuICB0aXRsZToge1xuICAgIHR5cGU6IHN0cmluZyxcbiAgICBcIiR0XCI6IHN0cmluZyxcbiAgfSxcbiAgY29udGVudDoge1xuICAgIHR5cGU6IHN0cmluZyxcbiAgICBcIiR0XCI6IHN0cmluZyxcbiAgfSxcbiAgZ3N4JHR5cGU6IHtcbiAgICAkdDogVHJhbnNsYXRpb25Sb3dUeXBlLFxuICB9XG4gIGdzeCRpZDoge1xuICAgICR0OiBzdHJpbmcsXG4gIH1cbiAgZ3N4JGVuYXU6IHtcbiAgICAkdDogc3RyaW5nLFxuICB9LFxuICBnc3gkZW51czoge1xuICAgICR0OiBzdHJpbmcsXG4gIH0sXG4gIGdzeCRndWppbjoge1xuICAgICR0OiBzdHJpbmcsXG4gIH0sXG4gIGdzeCRoaWluOiB7XG4gICAgJHQ6IHN0cmluZyxcbiAgfSxcbiAgZ3N4JHRlc3R1cHBlcjoge1xuICAgICR0OiBzdHJpbmcsXG4gIH0sXG4gIGdzeCRmcmZyOiB7XG4gICAgJHQ6IHN0cmluZyxcbiAgfSxcbiAgZ3N4JGVzZXM6IHtcbiAgICAkdDogc3RyaW5nLFxuICB9LFxufVxuXG5leHBvcnQgZW51bSBUcmFuc2xhdGlvblJvd1R5cGUge1xuICBzdHJpbmcgPSAnc3RyaW5nJyxcbiAgZnVuY3Rpb24gPSAnZnVuY3Rpb24nLFxufVxuXG5leHBvcnQgdHlwZSBUcmFuc2xhdGlvblJvdyA9IHtcbiAgaWQ6IHN0cmluZyxcbiAgdHlwZTogVHJhbnNsYXRpb25Sb3dUeXBlLFxuICBlbl9BVTogc3RyaW5nLFxuICBlbl9VUzogc3RyaW5nLFxuICBndWpfSU46IHN0cmluZyxcbiAgaGlfSU46IHN0cmluZyxcbiAgdGVzdF9VUFBFUjogc3RyaW5nLFxuICBmcl9GUjogc3RyaW5nLFxuICBlc19FUzogc3RyaW5nLFxufVxuXG5leHBvcnQgdHlwZSBUcmFuc2xhdGlvbkNvbHVtbiA9IHtcbiAgW2luZGV4OiBzdHJpbmddOiBbc3RyaW5nLCBUcmFuc2xhdGlvblJvd1R5cGVdXG59XG5cblxuZnVuY3Rpb24gd3JpdGVGaWxlKHBhdGg6c3RyaW5nLCBjb250ZW50czpzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBmcy53cml0ZUZpbGUocGF0aCwgY29udGVudHMsIChlcnI6IGFueSkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICB9XG5cbiAgICAgIHJlc29sdmUoKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNhbml0aXplKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAvLyByZXR1cm4gaW5wdXQucmVwbGFjZSgnXCInLCBcIidcIik7XG4gIHJldHVybiBpbnB1dC5yZXBsYWNlKC9cIi9nLCBcIidcIik7XG59XG5cblxuZnVuY3Rpb24gcnVuKCkge1xuICAvL2h0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kL2UvMlBBQ1gtMXZTSHA2dV9XWE0xOE5COVJxUGZpYUt1Z0hkVF96aEhQNU5RbFpZU3R6UkpmbndGSlBsZndUU1l0QUdKdlAxYXh2aFo4V2lmWUpjRThSQUovcHViaHRtbFxuICBjb25zdCBzaGVldHNJZCA9IFwiMTAyekxxRVdqNHhscXFOZ1ZVRkNpTUxxZGN2YUxZNkdudFMxeG1sSGRBRThcIlxuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9zcHJlYWRzaGVldHMuZ29vZ2xlLmNvbS9mZWVkcy9saXN0LyR7c2hlZXRzSWR9L2RlZmF1bHQvcHVibGljL3ZhbHVlcz9hbHQ9anNvbjtgXG5cbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmwsXG4gICAgcXM6IHsgYWx0OiAnanNvbicgfSxcbiAgICBoZWFkZXJzOlxuICAgIHtcbiAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJ1xuICAgIH0sXG4gICAganNvbjogdHJ1ZSxcbiAgfTtcbiAgcmV0dXJuIHJlcXVlc3Qob3B0aW9ucylcbiAgLnRoZW4oKHJlc3BvbnNlOiBTaGVldHNSZXNwb25zZSkgPT4ge1xuICAgIGNvbnN0IHBlclJvd1RyYW5zbGF0aW9uczogVHJhbnNsYXRpb25Sb3dbXSA9IFtdO1xuXG4gICAgcmVzcG9uc2UuZmVlZC5lbnRyeS5mb3JFYWNoKChyOiBTaGVldHNSb3cpID0+IHtcbiAgICAgIGNvbnN0IHJvdzogVHJhbnNsYXRpb25Sb3cgPSB7XG4gICAgICAgIGlkOiByLnRpdGxlLiR0LFxuICAgICAgICB0eXBlOiByLmdzeCR0eXBlLiR0LFxuICAgICAgICBlbl9BVTogci5nc3gkZW5hdS4kdCxcbiAgICAgICAgZW5fVVM6IHIuZ3N4JGVudXMuJHQsXG4gICAgICAgIGd1al9JTjogci5nc3gkZ3VqaW4uJHQsXG4gICAgICAgIGhpX0lOOiByLmdzeCRoaWluLiR0LFxuICAgICAgICB0ZXN0X1VQUEVSOiByLmdzeCR0ZXN0dXBwZXIuJHQsXG4gICAgICAgIGZyX0ZSOiByLmdzeCRmcmZyLiR0LFxuICAgICAgICBlc19FUzogc2FuaXRpemUoci5nc3gkZXNlcy4kdCksXG5cbiAgICAgIH07XG4gICAgICBwZXJSb3dUcmFuc2xhdGlvbnMucHVzaChyb3cpO1xuICAgIH0pO1xuXG4gICAgLy9Ob3cgdGhhdCB3ZSBoYXZlIHRoZSByb3dzLCB3cml0ZSB0aGUgZmlsZXMhXG4gICAgY29uc3QgZW5fQVU6IFRyYW5zbGF0aW9uQ29sdW1uID0ge307XG4gICAgY29uc3QgZW5fVVM6IFRyYW5zbGF0aW9uQ29sdW1uID0ge307XG4gICAgY29uc3QgZ3VqX0lOOiBUcmFuc2xhdGlvbkNvbHVtbiA9IHt9O1xuICAgIGNvbnN0IGhpX0lOOiBUcmFuc2xhdGlvbkNvbHVtbiA9IHt9O1xuICAgIGNvbnN0IGZyX0ZSOiBUcmFuc2xhdGlvbkNvbHVtbiA9IHt9O1xuICAgIGNvbnN0IGVzX0VTOiBUcmFuc2xhdGlvbkNvbHVtbiA9IHt9O1xuICAgIGNvbnN0IHRlc3RfVVBQRVI6IFRyYW5zbGF0aW9uQ29sdW1uID0ge307XG4gICAgcGVyUm93VHJhbnNsYXRpb25zLmZvckVhY2gocm93ID0+IGVuX0FVW3Jvdy5pZF0gPSBbcm93LmVuX0FVLCByb3cudHlwZV0pXG4gICAgcGVyUm93VHJhbnNsYXRpb25zLmZvckVhY2gocm93ID0+IGVuX1VTW3Jvdy5pZF0gPSBbcm93LmVuX1VTLCByb3cudHlwZV0pXG4gICAgcGVyUm93VHJhbnNsYXRpb25zLmZvckVhY2gocm93ID0+IGd1al9JTltyb3cuaWRdID0gW3Jvdy5ndWpfSU4sIHJvdy50eXBlXSlcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMuZm9yRWFjaChyb3cgPT4gaGlfSU5bcm93LmlkXSA9IFtyb3cuaGlfSU4sIHJvdy50eXBlXSlcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMuZm9yRWFjaChyb3cgPT4gZnJfRlJbcm93LmlkXSA9IFtyb3cuZnJfRlIsIHJvdy50eXBlXSlcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMuZm9yRWFjaChyb3cgPT4gZXNfRVNbcm93LmlkXSA9IFtyb3cuZXNfRVMsIHJvdy50eXBlXSlcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMuZm9yRWFjaChyb3cgPT4gdGVzdF9VUFBFUltyb3cuaWRdID0gW3Jvdy50ZXN0X1VQUEVSLCByb3cudHlwZV0pXG5cbiAgICBjb25zdCBlbl9BVV9maWxlID0gZmlsZUZvclRyYW5zbGF0aW9ucyhUcmFuc2xhdGlvbkVudW0uZW5fQVUsIGVuX0FVKTtcbiAgICBjb25zdCBlbl9VU19maWxlID0gZmlsZUZvclRyYW5zbGF0aW9ucyhUcmFuc2xhdGlvbkVudW0uZW5fVVMsIGVuX1VTKTtcbiAgICBjb25zdCB1al9JTl9maWxlID0gZmlsZUZvclRyYW5zbGF0aW9ucyhUcmFuc2xhdGlvbkVudW0uZ3VqX0lOLCBndWpfSU4pO1xuICAgIGNvbnN0IGhpX0lOX2ZpbGUgPSBmaWxlRm9yVHJhbnNsYXRpb25zKFRyYW5zbGF0aW9uRW51bS5oaV9JTiwgaGlfSU4pO1xuICAgIGNvbnN0IHRlc3RfVVBQRVJfZmlsZSA9IGZpbGVGb3JUcmFuc2xhdGlvbnMoVHJhbnNsYXRpb25FbnVtLnRlc3RfVVBQRVIsIHRlc3RfVVBQRVIpO1xuICAgIGNvbnN0IGZyX0ZSX2ZpbGUgPSBmaWxlRm9yVHJhbnNsYXRpb25zKFRyYW5zbGF0aW9uRW51bS5mcl9GUiwgZnJfRlIpO1xuICAgIGNvbnN0IGVzX0VTX2ZpbGUgPSBmaWxlRm9yVHJhbnNsYXRpb25zKFRyYW5zbGF0aW9uRW51bS5lc19FUywgZXNfRVMpO1xuXG5cblxuICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICB3cml0ZUZpbGUoJy4vc3JjL2NvbW1vbi9lbl9BVS50cycsIGVuX0FVX2ZpbGUpLFxuICAgICAgd3JpdGVGaWxlKCcuL3NyYy9jb21tb24vZW5fVVMudHMnLCBlbl9VU19maWxlKSxcbiAgICAgIHdyaXRlRmlsZSgnLi9zcmMvY29tbW9uL2d1al9JTi50cycsIHVqX0lOX2ZpbGUpLFxuICAgICAgd3JpdGVGaWxlKCcuL3NyYy9jb21tb24vaGlfSU4udHMnLCBoaV9JTl9maWxlKSxcbiAgICAgIHdyaXRlRmlsZSgnLi9zcmMvY29tbW9uL3Rlc3RfVVBQRVIudHMnLCB0ZXN0X1VQUEVSX2ZpbGUpLFxuICAgICAgd3JpdGVGaWxlKCcuL3NyYy9jb21tb24vZnJfRlIudHMnLCBmcl9GUl9maWxlKSxcbiAgICAgIHdyaXRlRmlsZSgnLi9zcmMvY29tbW9uL2VzX0VTLnRzJywgZXNfRVNfZmlsZSksXG4gICAgXSkuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoZXJyKSlcbiAgfSlcbiAgLmNhdGNoKChlcnI6IGFueSkgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbn1cblxucnVuKCk7Il19