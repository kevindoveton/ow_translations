"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TranslationRowType = void 0;

var _template = require("./template");

var _Types = require("./Types");

var fs = require('fs');

/**
 * Parser pulls down the translations from Google sheets, and puts them
 * in the right fields.
 */
var request = require('request-promise-native');

var TranslationRowType;
exports.TranslationRowType = TranslationRowType;

(function (TranslationRowType) {
  TranslationRowType["string"] = "string";
  TranslationRowType["function"] = "function";
})(TranslationRowType || (exports.TranslationRowType = TranslationRowType = {}));

function writeFile(path, contents) {
  return new Promise(function (resolve, reject) {
    fs.writeFile(path, contents, function (err) {
      if (err) {
        return reject(err);
      }

      resolve();
    });
  });
}

function sanitize(input) {
  // return input.replace('"', "'");
  return input.replace(/"/g, "'");
}

function getSheetAsJson(sheetId) {
  //https://docs.google.com/spreadsheets/d/e/2PACX-1vSHp6u_WXM18NB9RqPfiaKugHdT_zhHP5NQlZYStzRJfnwFJPlfwTSYtAGJvP1axvhZ8WifYJcE8RAJ/pubhtml
  var url = "https://spreadsheets.google.com/feeds/list/".concat(sheetId, "/default/public/values?alt=json;");
  var options = {
    method: 'GET',
    url: url,
    qs: {
      alt: 'json'
    },
    headers: {
      'Cache-Control': 'no-cache'
    },
    json: true
  };
  return request(options);
}

function sheetsResponseToRows(response) {
  var perRowTranslations = [];
  response.feed.entry.forEach(function (r) {
    var row = {
      id: r.title.$t,
      notes: r.gsx$notes.$t,
      type: r.gsx$type.$t,
      en_AU: r.gsx$enau.$t,
      en_US: r.gsx$enus.$t,
      guj_IN: r.gsx$gujin.$t,
      hi_IN: r.gsx$hiin.$t,
      test_UPPER: r.gsx$testupper.$t,
      fr_FR: sanitize(r.gsx$frfr.$t),
      es_ES: sanitize(r.gsx$eses.$t)
    };
    perRowTranslations.push(row);
  });
  return perRowTranslations;
}

function sheetsResponseToRowsGGMN(response) {
  var perRowTranslations = [];
  response.feed.entry.forEach(function (r) {
    var row = {
      id: r.title.$t,
      notes: r.gsx$notes.$t,
      type: r.gsx$type.$t,
      en_AU: r.gsx$enau.$t,
      fr_FR: sanitize(r.gsx$frfr.$t),
      es_ES: sanitize(r.gsx$eses.$t)
    };
    perRowTranslations.push(row);
  });
  return perRowTranslations;
}

function run() {
  getSheetAsJson("102zLqEWj4xlqqNgVUFCiMLqdcvaLY6GntS1xmlHdAE8").then(function (response) {
    var perRowTranslations = sheetsResponseToRows(response); //Now that we have the rows, write the files!

    var en_AU = {};
    var en_US = {};
    var guj_IN = {};
    var hi_IN = {};
    var fr_FR = {};
    var es_ES = {};
    var test_UPPER = {};
    perRowTranslations.forEach(function (row) {
      return en_AU[row.id] = [row.en_AU, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return en_US[row.id] = [row.en_US, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return guj_IN[row.id] = [row.guj_IN, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return hi_IN[row.id] = [row.hi_IN, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return fr_FR[row.id] = [row.fr_FR, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return es_ES[row.id] = [row.es_ES, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return test_UPPER[row.id] = [row.test_UPPER, row.type];
    });
    var en_AU_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.en_AU, en_AU);
    var en_US_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.en_US, en_US);
    var uj_IN_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.guj_IN, guj_IN);
    var hi_IN_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.hi_IN, hi_IN);
    var test_UPPER_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.test_UPPER, test_UPPER);
    var fr_FR_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.fr_FR, fr_FR);
    var es_ES_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.es_ES, es_ES);
    return Promise.all([writeFile('./src/common/en_AU.ts', en_AU_file), writeFile('./src/common/en_US.ts', en_US_file), writeFile('./src/common/guj_IN.ts', uj_IN_file), writeFile('./src/common/hi_IN.ts', hi_IN_file), writeFile('./src/common/test_UPPER.ts', test_UPPER_file), writeFile('./src/common/fr_FR.ts', fr_FR_file), writeFile('./src/common/es_ES.ts', es_ES_file)]).catch(function (err) {
      return console.error(err);
    });
  }).catch(function (err) {
    return console.error(err);
  });
}

function getOverrides(sheetId, orgId) {
  return getSheetAsJson(sheetId).then(function (response) {
    var perRowTranslations = sheetsResponseToRowsGGMN(response).filter(function (r) {
      return r.notes.toLowerCase() === 'override';
    });
    console.log("Found ".concat(perRowTranslations.length, " overrides for org: ").concat(orgId)); //TODO: generalize to other orgs, for now GGMN is fine
    //Now that we have the rows, write the files!

    var en_AU = {};
    var fr_FR = {};
    var es_ES = {};
    perRowTranslations.forEach(function (row) {
      return en_AU[row.id] = [row.en_AU, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return fr_FR[row.id] = [row.fr_FR, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return es_ES[row.id] = [row.es_ES, row.type];
    });
    var en_AU_file = (0, _template.fileForOverrides)(orgId, _Types.TranslationEnum.en_AU, en_AU);
    var fr_FR_file = (0, _template.fileForOverrides)(orgId, _Types.TranslationEnum.fr_FR, fr_FR);
    var es_ES_file = (0, _template.fileForOverrides)(orgId, _Types.TranslationEnum.es_ES, es_ES);
    return Promise.all([writeFile("./src/".concat(orgId, "/en_AU.ts"), en_AU_file), writeFile("./src/".concat(orgId, "/fr_FR.ts"), fr_FR_file), writeFile("./src/".concat(orgId, "/es_ES.ts"), es_ES_file)]).catch(function (err) {
      return console.error(err);
    });
  });
}

run();
getOverrides('11JUqNJ-gScZ3scUe1bi7XMWDJgniwS7ZY4Guxv5AJtE', 'ggmn');
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXJzZXIudHMiXSwibmFtZXMiOlsiZnMiLCJyZXF1aXJlIiwicmVxdWVzdCIsIlRyYW5zbGF0aW9uUm93VHlwZSIsIndyaXRlRmlsZSIsInBhdGgiLCJjb250ZW50cyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZXJyIiwic2FuaXRpemUiLCJpbnB1dCIsInJlcGxhY2UiLCJnZXRTaGVldEFzSnNvbiIsInNoZWV0SWQiLCJ1cmwiLCJvcHRpb25zIiwibWV0aG9kIiwicXMiLCJhbHQiLCJoZWFkZXJzIiwianNvbiIsInNoZWV0c1Jlc3BvbnNlVG9Sb3dzIiwicmVzcG9uc2UiLCJwZXJSb3dUcmFuc2xhdGlvbnMiLCJmZWVkIiwiZW50cnkiLCJmb3JFYWNoIiwiciIsInJvdyIsImlkIiwidGl0bGUiLCIkdCIsIm5vdGVzIiwiZ3N4JG5vdGVzIiwidHlwZSIsImdzeCR0eXBlIiwiZW5fQVUiLCJnc3gkZW5hdSIsImVuX1VTIiwiZ3N4JGVudXMiLCJndWpfSU4iLCJnc3gkZ3VqaW4iLCJoaV9JTiIsImdzeCRoaWluIiwidGVzdF9VUFBFUiIsImdzeCR0ZXN0dXBwZXIiLCJmcl9GUiIsImdzeCRmcmZyIiwiZXNfRVMiLCJnc3gkZXNlcyIsInB1c2giLCJzaGVldHNSZXNwb25zZVRvUm93c0dHTU4iLCJydW4iLCJ0aGVuIiwiZW5fQVVfZmlsZSIsIlRyYW5zbGF0aW9uRW51bSIsImVuX1VTX2ZpbGUiLCJ1al9JTl9maWxlIiwiaGlfSU5fZmlsZSIsInRlc3RfVVBQRVJfZmlsZSIsImZyX0ZSX2ZpbGUiLCJlc19FU19maWxlIiwiYWxsIiwiY2F0Y2giLCJjb25zb2xlIiwiZXJyb3IiLCJnZXRPdmVycmlkZXMiLCJvcmdJZCIsImZpbHRlciIsInRvTG93ZXJDYXNlIiwibG9nIiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBQ0E7O0FBRkEsSUFBTUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsSUFBRCxDQUFsQjs7QUFJQTs7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QUFDa0IsS0FBTCxFQUFZbEIsR0FBRyxDQUFDTSxJQUFoQixDQUFwQjtBQUFBLEtBQTlCO0FBQ0FYLElBQUFBLGtCQUFrQixDQUFDRyxPQUFuQixDQUEyQixVQUFBRSxHQUFHO0FBQUEsYUFBSW9CLEtBQUssQ0FBQ3BCLEdBQUcsQ0FBQ0MsRUFBTCxDQUFMLEdBQWdCLENBQUNELEdBQUcsQ0FBQ29CLEtBQUwsRUFBWXBCLEdBQUcsQ0FBQ00sSUFBaEIsQ0FBcEI7QUFBQSxLQUE5QjtBQUVBLFFBQU1vQixVQUFVLEdBQUcsZ0NBQWlCYSxLQUFqQixFQUF3QlosdUJBQWdCbkIsS0FBeEMsRUFBK0NBLEtBQS9DLENBQW5CO0FBQ0EsUUFBTXdCLFVBQVUsR0FBRyxnQ0FBaUJPLEtBQWpCLEVBQXdCWix1QkFBZ0JULEtBQXhDLEVBQStDQSxLQUEvQyxDQUFuQjtBQUNBLFFBQU1lLFVBQVUsR0FBRyxnQ0FBaUJNLEtBQWpCLEVBQXdCWix1QkFBZ0JQLEtBQXhDLEVBQStDQSxLQUEvQyxDQUFuQjtBQUVBLFdBQU8zQyxPQUFPLENBQUN5RCxHQUFSLENBQVksQ0FDakI1RCxTQUFTLGlCQUFVaUUsS0FBVixnQkFBNEJiLFVBQTVCLENBRFEsRUFFakJwRCxTQUFTLGlCQUFVaUUsS0FBVixnQkFBNEJQLFVBQTVCLENBRlEsRUFHakIxRCxTQUFTLGlCQUFVaUUsS0FBVixnQkFBNEJOLFVBQTVCLENBSFEsQ0FBWixFQUlKRSxLQUpJLENBSUUsVUFBQXZELEdBQUc7QUFBQSxhQUFJd0QsT0FBTyxDQUFDQyxLQUFSLENBQWN6RCxHQUFkLENBQUo7QUFBQSxLQUpMLENBQVA7QUFLRCxHQXhCTSxDQUFQO0FBMkJEOztBQUVENEMsR0FBRztBQUNIYyxZQUFZLENBQUMsOENBQUQsRUFBaUQsTUFBakQsQ0FBWiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmltcG9ydCB7IGZpbGVGb3JUcmFuc2xhdGlvbnMsIGZpbGVGb3JPdmVycmlkZXMgfSBmcm9tIFwiLi90ZW1wbGF0ZVwiO1xuaW1wb3J0IHsgVHJhbnNsYXRpb25FbnVtIH0gZnJvbSBcIi4vVHlwZXNcIjtcblxuLyoqXG4gKiBQYXJzZXIgcHVsbHMgZG93biB0aGUgdHJhbnNsYXRpb25zIGZyb20gR29vZ2xlIHNoZWV0cywgYW5kIHB1dHMgdGhlbVxuICogaW4gdGhlIHJpZ2h0IGZpZWxkcy5cbiAqL1xuXG5jb25zdCByZXF1ZXN0ID0gcmVxdWlyZSgncmVxdWVzdC1wcm9taXNlLW5hdGl2ZScpO1xuXG5leHBvcnQgdHlwZSBTaGVldHNSZXNwb25zZSA9IHtcbiAgdmVyc2lvbjogc3RyaW5nLFxuICBlbmNvZGluZzogc3RyaW5nLFxuICBmZWVkOiBTaGVldHNGZWVkLFxufVxuXG5leHBvcnQgdHlwZSBTaGVldHNGZWVkID0ge1xuICB0aXRsZTogc3RyaW5nLFxuICB1cGRhdGVkOiBzdHJpbmcsXG4gIGVudHJ5OiBTaGVldHNSb3dbXSxcbn1cblxuZXhwb3J0IHR5cGUgU2hlZXRzUm93ID0ge1xuICB0aXRsZToge1xuICAgIHR5cGU6IHN0cmluZyxcbiAgICBcIiR0XCI6IHN0cmluZyxcbiAgfSxcbiAgY29udGVudDoge1xuICAgIHR5cGU6IHN0cmluZyxcbiAgICBcIiR0XCI6IHN0cmluZyxcbiAgfSxcbiAgZ3N4JHR5cGU6IHtcbiAgICAkdDogVHJhbnNsYXRpb25Sb3dUeXBlLFxuICB9XG4gIGdzeCRpZDoge1xuICAgICR0OiBzdHJpbmcsXG4gIH1cbiAgZ3N4JG5vdGVzOiB7XG4gICAgJHQ6IHN0cmluZyxcbiAgfVxuICBnc3gkZW5hdToge1xuICAgICR0OiBzdHJpbmcsXG4gIH0sXG4gIGdzeCRlbnVzOiB7XG4gICAgJHQ6IHN0cmluZyxcbiAgfSxcbiAgZ3N4JGd1amluOiB7XG4gICAgJHQ6IHN0cmluZyxcbiAgfSxcbiAgZ3N4JGhpaW46IHtcbiAgICAkdDogc3RyaW5nLFxuICB9LFxuICBnc3gkdGVzdHVwcGVyOiB7XG4gICAgJHQ6IHN0cmluZyxcbiAgfSxcbiAgZ3N4JGZyZnI6IHtcbiAgICAkdDogc3RyaW5nLFxuICB9LFxuICBnc3gkZXNlczoge1xuICAgICR0OiBzdHJpbmcsXG4gIH0sXG59XG5cbmV4cG9ydCBlbnVtIFRyYW5zbGF0aW9uUm93VHlwZSB7XG4gIHN0cmluZyA9ICdzdHJpbmcnLFxuICBmdW5jdGlvbiA9ICdmdW5jdGlvbicsXG59XG5cbmV4cG9ydCB0eXBlIFRyYW5zbGF0aW9uUm93ID0ge1xuICBpZDogc3RyaW5nLFxuICB0eXBlOiBUcmFuc2xhdGlvblJvd1R5cGUsXG4gIG5vdGVzOiBzdHJpbmcsXG4gIGVuX0FVOiBzdHJpbmcsXG4gIGVuX1VTOiBzdHJpbmcsXG4gIGd1al9JTjogc3RyaW5nLFxuICBoaV9JTjogc3RyaW5nLFxuICB0ZXN0X1VQUEVSOiBzdHJpbmcsXG4gIGZyX0ZSOiBzdHJpbmcsXG4gIGVzX0VTOiBzdHJpbmcsXG59XG5cbmV4cG9ydCB0eXBlIEdHTU5UcmFuc2xhdGlvblJvdyA9IHtcbiAgaWQ6IHN0cmluZyxcbiAgdHlwZTogVHJhbnNsYXRpb25Sb3dUeXBlLFxuICBub3Rlczogc3RyaW5nLFxuICBlbl9BVTogc3RyaW5nLFxuICBmcl9GUjogc3RyaW5nLFxuICBlc19FUzogc3RyaW5nLFxufVxuXG5leHBvcnQgdHlwZSBUcmFuc2xhdGlvbkNvbHVtbiA9IHtcbiAgW2luZGV4OiBzdHJpbmddOiBbc3RyaW5nLCBUcmFuc2xhdGlvblJvd1R5cGVdXG59XG5cblxuZnVuY3Rpb24gd3JpdGVGaWxlKHBhdGg6c3RyaW5nLCBjb250ZW50czpzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBmcy53cml0ZUZpbGUocGF0aCwgY29udGVudHMsIChlcnI6IGFueSkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICB9XG5cbiAgICAgIHJlc29sdmUoKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNhbml0aXplKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAvLyByZXR1cm4gaW5wdXQucmVwbGFjZSgnXCInLCBcIidcIik7XG4gIHJldHVybiBpbnB1dC5yZXBsYWNlKC9cIi9nLCBcIidcIik7XG59XG5cbmZ1bmN0aW9uIGdldFNoZWV0QXNKc29uKHNoZWV0SWQ6IHN0cmluZyk6IFByb21pc2U8U2hlZXRzUmVzcG9uc2U+IHtcbiAgLy9odHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC9lLzJQQUNYLTF2U0hwNnVfV1hNMThOQjlScVBmaWFLdWdIZFRfemhIUDVOUWxaWVN0elJKZm53RkpQbGZ3VFNZdEFHSnZQMWF4dmhaOFdpZllKY0U4UkFKL3B1Ymh0bWxcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vc3ByZWFkc2hlZXRzLmdvb2dsZS5jb20vZmVlZHMvbGlzdC8ke3NoZWV0SWR9L2RlZmF1bHQvcHVibGljL3ZhbHVlcz9hbHQ9anNvbjtgXG5cbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmwsXG4gICAgcXM6IHsgYWx0OiAnanNvbicgfSxcbiAgICBoZWFkZXJzOlxuICAgIHtcbiAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJ1xuICAgIH0sXG4gICAganNvbjogdHJ1ZSxcbiAgfTtcbiAgcmV0dXJuIHJlcXVlc3Qob3B0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIHNoZWV0c1Jlc3BvbnNlVG9Sb3dzKHJlc3BvbnNlOiBTaGVldHNSZXNwb25zZSk6IFRyYW5zbGF0aW9uUm93W10ge1xuICBjb25zdCBwZXJSb3dUcmFuc2xhdGlvbnM6IFRyYW5zbGF0aW9uUm93W10gPSBbXTtcblxuICByZXNwb25zZS5mZWVkLmVudHJ5LmZvckVhY2goKHI6IFNoZWV0c1JvdykgPT4ge1xuICAgIGNvbnN0IHJvdzogVHJhbnNsYXRpb25Sb3cgPSB7XG4gICAgICBpZDogci50aXRsZS4kdCxcbiAgICAgIG5vdGVzOiByLmdzeCRub3Rlcy4kdCxcbiAgICAgIHR5cGU6IHIuZ3N4JHR5cGUuJHQsXG4gICAgICBlbl9BVTogci5nc3gkZW5hdS4kdCxcbiAgICAgIGVuX1VTOiByLmdzeCRlbnVzLiR0LFxuICAgICAgZ3VqX0lOOiByLmdzeCRndWppbi4kdCxcbiAgICAgIGhpX0lOOiByLmdzeCRoaWluLiR0LFxuICAgICAgdGVzdF9VUFBFUjogci5nc3gkdGVzdHVwcGVyLiR0LFxuICAgICAgZnJfRlI6IHNhbml0aXplKHIuZ3N4JGZyZnIuJHQpLFxuICAgICAgZXNfRVM6IHNhbml0aXplKHIuZ3N4JGVzZXMuJHQpLFxuXG4gICAgfTtcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMucHVzaChyb3cpO1xuICB9KTtcblxuICByZXR1cm4gcGVyUm93VHJhbnNsYXRpb25zO1xufVxuXG5mdW5jdGlvbiBzaGVldHNSZXNwb25zZVRvUm93c0dHTU4ocmVzcG9uc2U6IFNoZWV0c1Jlc3BvbnNlKTogR0dNTlRyYW5zbGF0aW9uUm93W10ge1xuICBjb25zdCBwZXJSb3dUcmFuc2xhdGlvbnM6IEdHTU5UcmFuc2xhdGlvblJvd1tdID0gW107XG5cbiAgcmVzcG9uc2UuZmVlZC5lbnRyeS5mb3JFYWNoKChyOiBTaGVldHNSb3cpID0+IHtcbiAgICBjb25zdCByb3c6IEdHTU5UcmFuc2xhdGlvblJvdyA9IHtcbiAgICAgIGlkOiByLnRpdGxlLiR0LFxuICAgICAgbm90ZXM6IHIuZ3N4JG5vdGVzLiR0LFxuICAgICAgdHlwZTogci5nc3gkdHlwZS4kdCxcbiAgICAgIGVuX0FVOiByLmdzeCRlbmF1LiR0LFxuICAgICAgZnJfRlI6IHNhbml0aXplKHIuZ3N4JGZyZnIuJHQpLFxuICAgICAgZXNfRVM6IHNhbml0aXplKHIuZ3N4JGVzZXMuJHQpLFxuXG4gICAgfTtcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMucHVzaChyb3cpO1xuICB9KTtcblxuICByZXR1cm4gcGVyUm93VHJhbnNsYXRpb25zO1xufVxuXG5cbmZ1bmN0aW9uIHJ1bigpIHtcbiAgZ2V0U2hlZXRBc0pzb24oXCIxMDJ6THFFV2o0eGxxcU5nVlVGQ2lNTHFkY3ZhTFk2R250UzF4bWxIZEFFOFwiKVxuICAudGhlbigocmVzcG9uc2U6IFNoZWV0c1Jlc3BvbnNlKSA9PiB7XG4gICAgY29uc3QgcGVyUm93VHJhbnNsYXRpb25zID0gc2hlZXRzUmVzcG9uc2VUb1Jvd3MocmVzcG9uc2UpO1xuXG4gICAgLy9Ob3cgdGhhdCB3ZSBoYXZlIHRoZSByb3dzLCB3cml0ZSB0aGUgZmlsZXMhXG4gICAgY29uc3QgZW5fQVU6IFRyYW5zbGF0aW9uQ29sdW1uID0ge307XG4gICAgY29uc3QgZW5fVVM6IFRyYW5zbGF0aW9uQ29sdW1uID0ge307XG4gICAgY29uc3QgZ3VqX0lOOiBUcmFuc2xhdGlvbkNvbHVtbiA9IHt9O1xuICAgIGNvbnN0IGhpX0lOOiBUcmFuc2xhdGlvbkNvbHVtbiA9IHt9O1xuICAgIGNvbnN0IGZyX0ZSOiBUcmFuc2xhdGlvbkNvbHVtbiA9IHt9O1xuICAgIGNvbnN0IGVzX0VTOiBUcmFuc2xhdGlvbkNvbHVtbiA9IHt9O1xuICAgIGNvbnN0IHRlc3RfVVBQRVI6IFRyYW5zbGF0aW9uQ29sdW1uID0ge307XG4gICAgcGVyUm93VHJhbnNsYXRpb25zLmZvckVhY2gocm93ID0+IGVuX0FVW3Jvdy5pZF0gPSBbcm93LmVuX0FVLCByb3cudHlwZV0pXG4gICAgcGVyUm93VHJhbnNsYXRpb25zLmZvckVhY2gocm93ID0+IGVuX1VTW3Jvdy5pZF0gPSBbcm93LmVuX1VTLCByb3cudHlwZV0pXG4gICAgcGVyUm93VHJhbnNsYXRpb25zLmZvckVhY2gocm93ID0+IGd1al9JTltyb3cuaWRdID0gW3Jvdy5ndWpfSU4sIHJvdy50eXBlXSlcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMuZm9yRWFjaChyb3cgPT4gaGlfSU5bcm93LmlkXSA9IFtyb3cuaGlfSU4sIHJvdy50eXBlXSlcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMuZm9yRWFjaChyb3cgPT4gZnJfRlJbcm93LmlkXSA9IFtyb3cuZnJfRlIsIHJvdy50eXBlXSlcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMuZm9yRWFjaChyb3cgPT4gZXNfRVNbcm93LmlkXSA9IFtyb3cuZXNfRVMsIHJvdy50eXBlXSlcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMuZm9yRWFjaChyb3cgPT4gdGVzdF9VUFBFUltyb3cuaWRdID0gW3Jvdy50ZXN0X1VQUEVSLCByb3cudHlwZV0pXG5cbiAgICBjb25zdCBlbl9BVV9maWxlID0gZmlsZUZvclRyYW5zbGF0aW9ucyhUcmFuc2xhdGlvbkVudW0uZW5fQVUsIGVuX0FVKTtcbiAgICBjb25zdCBlbl9VU19maWxlID0gZmlsZUZvclRyYW5zbGF0aW9ucyhUcmFuc2xhdGlvbkVudW0uZW5fVVMsIGVuX1VTKTtcbiAgICBjb25zdCB1al9JTl9maWxlID0gZmlsZUZvclRyYW5zbGF0aW9ucyhUcmFuc2xhdGlvbkVudW0uZ3VqX0lOLCBndWpfSU4pO1xuICAgIGNvbnN0IGhpX0lOX2ZpbGUgPSBmaWxlRm9yVHJhbnNsYXRpb25zKFRyYW5zbGF0aW9uRW51bS5oaV9JTiwgaGlfSU4pO1xuICAgIGNvbnN0IHRlc3RfVVBQRVJfZmlsZSA9IGZpbGVGb3JUcmFuc2xhdGlvbnMoVHJhbnNsYXRpb25FbnVtLnRlc3RfVVBQRVIsIHRlc3RfVVBQRVIpO1xuICAgIGNvbnN0IGZyX0ZSX2ZpbGUgPSBmaWxlRm9yVHJhbnNsYXRpb25zKFRyYW5zbGF0aW9uRW51bS5mcl9GUiwgZnJfRlIpO1xuICAgIGNvbnN0IGVzX0VTX2ZpbGUgPSBmaWxlRm9yVHJhbnNsYXRpb25zKFRyYW5zbGF0aW9uRW51bS5lc19FUywgZXNfRVMpO1xuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgIHdyaXRlRmlsZSgnLi9zcmMvY29tbW9uL2VuX0FVLnRzJywgZW5fQVVfZmlsZSksXG4gICAgICB3cml0ZUZpbGUoJy4vc3JjL2NvbW1vbi9lbl9VUy50cycsIGVuX1VTX2ZpbGUpLFxuICAgICAgd3JpdGVGaWxlKCcuL3NyYy9jb21tb24vZ3VqX0lOLnRzJywgdWpfSU5fZmlsZSksXG4gICAgICB3cml0ZUZpbGUoJy4vc3JjL2NvbW1vbi9oaV9JTi50cycsIGhpX0lOX2ZpbGUpLFxuICAgICAgd3JpdGVGaWxlKCcuL3NyYy9jb21tb24vdGVzdF9VUFBFUi50cycsIHRlc3RfVVBQRVJfZmlsZSksXG4gICAgICB3cml0ZUZpbGUoJy4vc3JjL2NvbW1vbi9mcl9GUi50cycsIGZyX0ZSX2ZpbGUpLFxuICAgICAgd3JpdGVGaWxlKCcuL3NyYy9jb21tb24vZXNfRVMudHMnLCBlc19FU19maWxlKSxcbiAgICBdKS5jYXRjaChlcnIgPT4gY29uc29sZS5lcnJvcihlcnIpKVxuICB9KVxuICAuY2F0Y2goKGVycjogYW55KSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xufVxuXG5mdW5jdGlvbiBnZXRPdmVycmlkZXMoc2hlZXRJZDogc3RyaW5nLCBvcmdJZDogc3RyaW5nKSB7XG4gIHJldHVybiBnZXRTaGVldEFzSnNvbihzaGVldElkKVxuICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgY29uc3QgcGVyUm93VHJhbnNsYXRpb25zID0gc2hlZXRzUmVzcG9uc2VUb1Jvd3NHR01OKHJlc3BvbnNlKS5maWx0ZXIociA9PiByLm5vdGVzLnRvTG93ZXJDYXNlKCkgPT09ICdvdmVycmlkZScpO1xuICAgIGNvbnNvbGUubG9nKGBGb3VuZCAke3BlclJvd1RyYW5zbGF0aW9ucy5sZW5ndGh9IG92ZXJyaWRlcyBmb3Igb3JnOiAke29yZ0lkfWApO1xuXG4gICAgLy9UT0RPOiBnZW5lcmFsaXplIHRvIG90aGVyIG9yZ3MsIGZvciBub3cgR0dNTiBpcyBmaW5lXG5cbiAgICAvL05vdyB0aGF0IHdlIGhhdmUgdGhlIHJvd3MsIHdyaXRlIHRoZSBmaWxlcyFcbiAgICBjb25zdCBlbl9BVTogVHJhbnNsYXRpb25Db2x1bW4gPSB7fTtcbiAgICBjb25zdCBmcl9GUjogVHJhbnNsYXRpb25Db2x1bW4gPSB7fTtcbiAgICBjb25zdCBlc19FUzogVHJhbnNsYXRpb25Db2x1bW4gPSB7fTtcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMuZm9yRWFjaChyb3cgPT4gZW5fQVVbcm93LmlkXSA9IFtyb3cuZW5fQVUsIHJvdy50eXBlXSlcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMuZm9yRWFjaChyb3cgPT4gZnJfRlJbcm93LmlkXSA9IFtyb3cuZnJfRlIsIHJvdy50eXBlXSlcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMuZm9yRWFjaChyb3cgPT4gZXNfRVNbcm93LmlkXSA9IFtyb3cuZXNfRVMsIHJvdy50eXBlXSlcblxuICAgIGNvbnN0IGVuX0FVX2ZpbGUgPSBmaWxlRm9yT3ZlcnJpZGVzKG9yZ0lkLCBUcmFuc2xhdGlvbkVudW0uZW5fQVUsIGVuX0FVKTtcbiAgICBjb25zdCBmcl9GUl9maWxlID0gZmlsZUZvck92ZXJyaWRlcyhvcmdJZCwgVHJhbnNsYXRpb25FbnVtLmZyX0ZSLCBmcl9GUik7XG4gICAgY29uc3QgZXNfRVNfZmlsZSA9IGZpbGVGb3JPdmVycmlkZXMob3JnSWQsIFRyYW5zbGF0aW9uRW51bS5lc19FUywgZXNfRVMpO1xuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgIHdyaXRlRmlsZShgLi9zcmMvJHtvcmdJZH0vZW5fQVUudHNgLCBlbl9BVV9maWxlKSxcbiAgICAgIHdyaXRlRmlsZShgLi9zcmMvJHtvcmdJZH0vZnJfRlIudHNgLCBmcl9GUl9maWxlKSxcbiAgICAgIHdyaXRlRmlsZShgLi9zcmMvJHtvcmdJZH0vZXNfRVMudHNgLCBlc19FU19maWxlKSxcbiAgICBdKS5jYXRjaChlcnIgPT4gY29uc29sZS5lcnJvcihlcnIpKVxuICB9KTtcblxuXG59XG5cbnJ1bigpO1xuZ2V0T3ZlcnJpZGVzKCcxMUpVcU5KLWdTY1ozc2NVZTFiaTdYTVdESmduaXdTN1pZNEd1eHY1QUp0RScsICdnZ21uJyk7Il19