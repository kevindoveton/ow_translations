"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TranslationRowType = void 0;

var _template = require("./template");

var _Types = require("./Types");

var fs = require('fs');

/**
 * Parser pulls down the translations from Google sheets, and puts them
 * in the right fields.
 */
var request = require('request-promise-native');

var TranslationRowType;
exports.TranslationRowType = TranslationRowType;

(function (TranslationRowType) {
  TranslationRowType["string"] = "string";
  TranslationRowType["function"] = "function";
})(TranslationRowType || (exports.TranslationRowType = TranslationRowType = {}));

function writeFile(path, contents) {
  return new Promise(function (resolve, reject) {
    fs.writeFile(path, contents, function (err) {
      if (err) {
        return reject(err);
      }

      resolve();
    });
  });
}

function run() {
  //https://docs.google.com/spreadsheets/d/e/2PACX-1vSHp6u_WXM18NB9RqPfiaKugHdT_zhHP5NQlZYStzRJfnwFJPlfwTSYtAGJvP1axvhZ8WifYJcE8RAJ/pubhtml
  var sheetsId = "102zLqEWj4xlqqNgVUFCiMLqdcvaLY6GntS1xmlHdAE8";
  var url = "https://spreadsheets.google.com/feeds/list/".concat(sheetsId, "/default/public/values?alt=json;");
  var options = {
    method: 'GET',
    url: url,
    qs: {
      alt: 'json'
    },
    headers: {
      'Cache-Control': 'no-cache'
    },
    json: true
  };
  return request(options).then(function (response) {
    console.log(response.feed.title);
    var perRowTranslations = [];
    response.feed.entry.forEach(function (r) {
      var row = {
        id: r.title.$t,
        type: r.gsx$type.$t,
        en_AU: r.gsx$enau.$t,
        en_US: r.gsx$enus.$t,
        guj_IN: r.gsx$gujin.$t,
        hi_IN: r.gsx$hiin.$t,
        test_UPPER: r.gsx$testupper.$t,
        fr_FR: r.gsx$frfr.$t,
        es_ES: r.gsx$eses.$t
      };
      perRowTranslations.push(row);
    }); //Now that we have the rows, write the files!

    var en_AU = {};
    var en_US = {};
    var guj_IN = {};
    var hi_IN = {};
    var fr_FR = {};
    var es_ES = {};
    var test_UPPER = {};
    perRowTranslations.forEach(function (row) {
      return en_AU[row.id] = [row.en_AU, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return en_US[row.id] = [row.en_US, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return guj_IN[row.id] = [row.guj_IN, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return hi_IN[row.id] = [row.hi_IN, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return fr_FR[row.id] = [row.fr_FR, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return es_ES[row.id] = [row.es_ES, row.type];
    });
    perRowTranslations.forEach(function (row) {
      return test_UPPER[row.id] = [row.test_UPPER, row.type];
    });
    var en_AU_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.en_AU, en_AU);
    var en_US_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.en_US, en_US);
    var uj_IN_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.guj_IN, guj_IN);
    var hi_IN_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.hi_IN, hi_IN);
    var test_UPPER_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.test_UPPER, test_UPPER);
    var fr_FR_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.fr_FR, fr_FR);
    var es_ES_file = (0, _template.fileForTranslations)(_Types.TranslationEnum.es_ES, es_ES);
    return Promise.all([writeFile('./src/common/en_AU.ts', en_AU_file), writeFile('./src/common/en_US.ts', en_US_file), writeFile('./src/common/guj_IN.ts', uj_IN_file), writeFile('./src/common/hi_IN.ts', hi_IN_file), writeFile('./src/common/test_UPPER.ts', test_UPPER_file), writeFile('./src/common/fr_FR.ts', fr_FR_file), writeFile('./src/common/es_ES.ts', es_ES_file)]).catch(function (err) {
      return console.error(err);
    });
  }).catch(function (err) {
    return console.error(err);
  });
}

run();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXJzZXIudHMiXSwibmFtZXMiOlsiZnMiLCJyZXF1aXJlIiwicmVxdWVzdCIsIlRyYW5zbGF0aW9uUm93VHlwZSIsIndyaXRlRmlsZSIsInBhdGgiLCJjb250ZW50cyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZXJyIiwicnVuIiwic2hlZXRzSWQiLCJ1cmwiLCJvcHRpb25zIiwibWV0aG9kIiwicXMiLCJhbHQiLCJoZWFkZXJzIiwianNvbiIsInRoZW4iLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJmZWVkIiwidGl0bGUiLCJwZXJSb3dUcmFuc2xhdGlvbnMiLCJlbnRyeSIsImZvckVhY2giLCJyIiwicm93IiwiaWQiLCIkdCIsInR5cGUiLCJnc3gkdHlwZSIsImVuX0FVIiwiZ3N4JGVuYXUiLCJlbl9VUyIsImdzeCRlbnVzIiwiZ3VqX0lOIiwiZ3N4JGd1amluIiwiaGlfSU4iLCJnc3gkaGlpbiIsInRlc3RfVVBQRVIiLCJnc3gkdGVzdHVwcGVyIiwiZnJfRlIiLCJnc3gkZnJmciIsImVzX0VTIiwiZ3N4JGVzZXMiLCJwdXNoIiwiZW5fQVVfZmlsZSIsIlRyYW5zbGF0aW9uRW51bSIsImVuX1VTX2ZpbGUiLCJ1al9JTl9maWxlIiwiaGlfSU5fZmlsZSIsInRlc3RfVVBQRVJfZmlsZSIsImZyX0ZSX2ZpbGUiLCJlc19FU19maWxlIiwiYWxsIiwiY2F0Y2giLCJlcnJvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOztBQUNBOztBQUZBLElBQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLElBQUQsQ0FBbEI7O0FBSUE7Ozs7QUFLQSxJQUFNQyxPQUFPLEdBQUdELE9BQU8sQ0FBQyx3QkFBRCxDQUF2Qjs7SUFvRFlFLGtCOzs7V0FBQUEsa0I7QUFBQUEsRUFBQUEsa0I7QUFBQUEsRUFBQUEsa0I7R0FBQUEsa0Isa0NBQUFBLGtCOztBQXNCWixTQUFTQyxTQUFULENBQW1CQyxJQUFuQixFQUFnQ0MsUUFBaEMsRUFBZ0U7QUFDOUQsU0FBTyxJQUFJQyxPQUFKLENBQVksVUFBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQXFCO0FBQ3RDVCxJQUFBQSxFQUFFLENBQUNJLFNBQUgsQ0FBYUMsSUFBYixFQUFtQkMsUUFBbkIsRUFBNkIsVUFBQ0ksR0FBRCxFQUFjO0FBQ3pDLFVBQUlBLEdBQUosRUFBUztBQUNQLGVBQU9ELE1BQU0sQ0FBQ0MsR0FBRCxDQUFiO0FBQ0Q7O0FBRURGLE1BQUFBLE9BQU87QUFDUixLQU5EO0FBT0QsR0FSTSxDQUFQO0FBU0Q7O0FBR0QsU0FBU0csR0FBVCxHQUFlO0FBQ2I7QUFDQSxNQUFNQyxRQUFRLEdBQUcsOENBQWpCO0FBQ0EsTUFBTUMsR0FBRyx3REFBaURELFFBQWpELHFDQUFUO0FBRUEsTUFBSUUsT0FBTyxHQUFHO0FBQ1pDLElBQUFBLE1BQU0sRUFBRSxLQURJO0FBRVpGLElBQUFBLEdBQUcsRUFBSEEsR0FGWTtBQUdaRyxJQUFBQSxFQUFFLEVBQUU7QUFBRUMsTUFBQUEsR0FBRyxFQUFFO0FBQVAsS0FIUTtBQUlaQyxJQUFBQSxPQUFPLEVBQ1A7QUFDRSx1QkFBaUI7QUFEbkIsS0FMWTtBQVFaQyxJQUFBQSxJQUFJLEVBQUU7QUFSTSxHQUFkO0FBVUEsU0FBT2pCLE9BQU8sQ0FBQ1ksT0FBRCxDQUFQLENBQ05NLElBRE0sQ0FDRCxVQUFDQyxRQUFELEVBQThCO0FBQ2xDQyxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUYsUUFBUSxDQUFDRyxJQUFULENBQWNDLEtBQTFCO0FBQ0EsUUFBTUMsa0JBQW9DLEdBQUcsRUFBN0M7QUFFQUwsSUFBQUEsUUFBUSxDQUFDRyxJQUFULENBQWNHLEtBQWQsQ0FBb0JDLE9BQXBCLENBQTRCLFVBQUNDLENBQUQsRUFBa0I7QUFDNUMsVUFBTUMsR0FBbUIsR0FBRztBQUMxQkMsUUFBQUEsRUFBRSxFQUFFRixDQUFDLENBQUNKLEtBQUYsQ0FBUU8sRUFEYztBQUUxQkMsUUFBQUEsSUFBSSxFQUFFSixDQUFDLENBQUNLLFFBQUYsQ0FBV0YsRUFGUztBQUcxQkcsUUFBQUEsS0FBSyxFQUFFTixDQUFDLENBQUNPLFFBQUYsQ0FBV0osRUFIUTtBQUkxQkssUUFBQUEsS0FBSyxFQUFFUixDQUFDLENBQUNTLFFBQUYsQ0FBV04sRUFKUTtBQUsxQk8sUUFBQUEsTUFBTSxFQUFFVixDQUFDLENBQUNXLFNBQUYsQ0FBWVIsRUFMTTtBQU0xQlMsUUFBQUEsS0FBSyxFQUFFWixDQUFDLENBQUNhLFFBQUYsQ0FBV1YsRUFOUTtBQU8xQlcsUUFBQUEsVUFBVSxFQUFFZCxDQUFDLENBQUNlLGFBQUYsQ0FBZ0JaLEVBUEY7QUFRMUJhLFFBQUFBLEtBQUssRUFBRWhCLENBQUMsQ0FBQ2lCLFFBQUYsQ0FBV2QsRUFSUTtBQVMxQmUsUUFBQUEsS0FBSyxFQUFFbEIsQ0FBQyxDQUFDbUIsUUFBRixDQUFXaEI7QUFUUSxPQUE1QjtBQVlBTixNQUFBQSxrQkFBa0IsQ0FBQ3VCLElBQW5CLENBQXdCbkIsR0FBeEI7QUFDRCxLQWRELEVBSmtDLENBb0JsQzs7QUFDQSxRQUFNSyxLQUF3QixHQUFHLEVBQWpDO0FBQ0EsUUFBTUUsS0FBd0IsR0FBRyxFQUFqQztBQUNBLFFBQU1FLE1BQXlCLEdBQUcsRUFBbEM7QUFDQSxRQUFNRSxLQUF3QixHQUFHLEVBQWpDO0FBQ0EsUUFBTUksS0FBd0IsR0FBRyxFQUFqQztBQUNBLFFBQU1FLEtBQXdCLEdBQUcsRUFBakM7QUFDQSxRQUFNSixVQUE2QixHQUFHLEVBQXRDO0FBQ0FqQixJQUFBQSxrQkFBa0IsQ0FBQ0UsT0FBbkIsQ0FBMkIsVUFBQUUsR0FBRztBQUFBLGFBQUlLLEtBQUssQ0FBQ0wsR0FBRyxDQUFDQyxFQUFMLENBQUwsR0FBZ0IsQ0FBQ0QsR0FBRyxDQUFDSyxLQUFMLEVBQVlMLEdBQUcsQ0FBQ0csSUFBaEIsQ0FBcEI7QUFBQSxLQUE5QjtBQUNBUCxJQUFBQSxrQkFBa0IsQ0FBQ0UsT0FBbkIsQ0FBMkIsVUFBQUUsR0FBRztBQUFBLGFBQUlPLEtBQUssQ0FBQ1AsR0FBRyxDQUFDQyxFQUFMLENBQUwsR0FBZ0IsQ0FBQ0QsR0FBRyxDQUFDTyxLQUFMLEVBQVlQLEdBQUcsQ0FBQ0csSUFBaEIsQ0FBcEI7QUFBQSxLQUE5QjtBQUNBUCxJQUFBQSxrQkFBa0IsQ0FBQ0UsT0FBbkIsQ0FBMkIsVUFBQUUsR0FBRztBQUFBLGFBQUlTLE1BQU0sQ0FBQ1QsR0FBRyxDQUFDQyxFQUFMLENBQU4sR0FBaUIsQ0FBQ0QsR0FBRyxDQUFDUyxNQUFMLEVBQWFULEdBQUcsQ0FBQ0csSUFBakIsQ0FBckI7QUFBQSxLQUE5QjtBQUNBUCxJQUFBQSxrQkFBa0IsQ0FBQ0UsT0FBbkIsQ0FBMkIsVUFBQUUsR0FBRztBQUFBLGFBQUlXLEtBQUssQ0FBQ1gsR0FBRyxDQUFDQyxFQUFMLENBQUwsR0FBZ0IsQ0FBQ0QsR0FBRyxDQUFDVyxLQUFMLEVBQVlYLEdBQUcsQ0FBQ0csSUFBaEIsQ0FBcEI7QUFBQSxLQUE5QjtBQUNBUCxJQUFBQSxrQkFBa0IsQ0FBQ0UsT0FBbkIsQ0FBMkIsVUFBQUUsR0FBRztBQUFBLGFBQUllLEtBQUssQ0FBQ2YsR0FBRyxDQUFDQyxFQUFMLENBQUwsR0FBZ0IsQ0FBQ0QsR0FBRyxDQUFDZSxLQUFMLEVBQVlmLEdBQUcsQ0FBQ0csSUFBaEIsQ0FBcEI7QUFBQSxLQUE5QjtBQUNBUCxJQUFBQSxrQkFBa0IsQ0FBQ0UsT0FBbkIsQ0FBMkIsVUFBQUUsR0FBRztBQUFBLGFBQUlpQixLQUFLLENBQUNqQixHQUFHLENBQUNDLEVBQUwsQ0FBTCxHQUFnQixDQUFDRCxHQUFHLENBQUNpQixLQUFMLEVBQVlqQixHQUFHLENBQUNHLElBQWhCLENBQXBCO0FBQUEsS0FBOUI7QUFDQVAsSUFBQUEsa0JBQWtCLENBQUNFLE9BQW5CLENBQTJCLFVBQUFFLEdBQUc7QUFBQSxhQUFJYSxVQUFVLENBQUNiLEdBQUcsQ0FBQ0MsRUFBTCxDQUFWLEdBQXFCLENBQUNELEdBQUcsQ0FBQ2EsVUFBTCxFQUFpQmIsR0FBRyxDQUFDRyxJQUFyQixDQUF6QjtBQUFBLEtBQTlCO0FBRUEsUUFBTWlCLFVBQVUsR0FBRyxtQ0FBb0JDLHVCQUFnQmhCLEtBQXBDLEVBQTJDQSxLQUEzQyxDQUFuQjtBQUNBLFFBQU1pQixVQUFVLEdBQUcsbUNBQW9CRCx1QkFBZ0JkLEtBQXBDLEVBQTJDQSxLQUEzQyxDQUFuQjtBQUNBLFFBQU1nQixVQUFVLEdBQUcsbUNBQW9CRix1QkFBZ0JaLE1BQXBDLEVBQTRDQSxNQUE1QyxDQUFuQjtBQUNBLFFBQU1lLFVBQVUsR0FBRyxtQ0FBb0JILHVCQUFnQlYsS0FBcEMsRUFBMkNBLEtBQTNDLENBQW5CO0FBQ0EsUUFBTWMsZUFBZSxHQUFHLG1DQUFvQkosdUJBQWdCUixVQUFwQyxFQUFnREEsVUFBaEQsQ0FBeEI7QUFDQSxRQUFNYSxVQUFVLEdBQUcsbUNBQW9CTCx1QkFBZ0JOLEtBQXBDLEVBQTJDQSxLQUEzQyxDQUFuQjtBQUNBLFFBQU1ZLFVBQVUsR0FBRyxtQ0FBb0JOLHVCQUFnQkosS0FBcEMsRUFBMkNBLEtBQTNDLENBQW5CO0FBSUEsV0FBT3hDLE9BQU8sQ0FBQ21ELEdBQVIsQ0FBWSxDQUNqQnRELFNBQVMsQ0FBQyx1QkFBRCxFQUEwQjhDLFVBQTFCLENBRFEsRUFFakI5QyxTQUFTLENBQUMsdUJBQUQsRUFBMEJnRCxVQUExQixDQUZRLEVBR2pCaEQsU0FBUyxDQUFDLHdCQUFELEVBQTJCaUQsVUFBM0IsQ0FIUSxFQUlqQmpELFNBQVMsQ0FBQyx1QkFBRCxFQUEwQmtELFVBQTFCLENBSlEsRUFLakJsRCxTQUFTLENBQUMsNEJBQUQsRUFBK0JtRCxlQUEvQixDQUxRLEVBTWpCbkQsU0FBUyxDQUFDLHVCQUFELEVBQTBCb0QsVUFBMUIsQ0FOUSxFQU9qQnBELFNBQVMsQ0FBQyx1QkFBRCxFQUEwQnFELFVBQTFCLENBUFEsQ0FBWixFQVFKRSxLQVJJLENBUUUsVUFBQWpELEdBQUc7QUFBQSxhQUFJWSxPQUFPLENBQUNzQyxLQUFSLENBQWNsRCxHQUFkLENBQUo7QUFBQSxLQVJMLENBQVA7QUFTRCxHQXhETSxFQXlETmlELEtBekRNLENBeURBLFVBQUNqRCxHQUFEO0FBQUEsV0FBY1ksT0FBTyxDQUFDc0MsS0FBUixDQUFjbEQsR0FBZCxDQUFkO0FBQUEsR0F6REEsQ0FBUDtBQTBERDs7QUFFREMsR0FBRyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmltcG9ydCB7IGZpbGVGb3JUcmFuc2xhdGlvbnMgfSBmcm9tIFwiLi90ZW1wbGF0ZVwiO1xuaW1wb3J0IHsgVHJhbnNsYXRpb25FbnVtIH0gZnJvbSBcIi4vVHlwZXNcIjtcblxuLyoqXG4gKiBQYXJzZXIgcHVsbHMgZG93biB0aGUgdHJhbnNsYXRpb25zIGZyb20gR29vZ2xlIHNoZWV0cywgYW5kIHB1dHMgdGhlbVxuICogaW4gdGhlIHJpZ2h0IGZpZWxkcy5cbiAqL1xuXG5jb25zdCByZXF1ZXN0ID0gcmVxdWlyZSgncmVxdWVzdC1wcm9taXNlLW5hdGl2ZScpO1xuXG5leHBvcnQgdHlwZSBTaGVldHNSZXNwb25zZSA9IHtcbiAgdmVyc2lvbjogc3RyaW5nLFxuICBlbmNvZGluZzogc3RyaW5nLFxuICBmZWVkOiBTaGVldHNGZWVkLFxufVxuXG5leHBvcnQgdHlwZSBTaGVldHNGZWVkID0ge1xuICB0aXRsZTogc3RyaW5nLFxuICB1cGRhdGVkOiBzdHJpbmcsXG4gIGVudHJ5OiBTaGVldHNSb3dbXSxcbn1cblxuZXhwb3J0IHR5cGUgU2hlZXRzUm93ID0ge1xuICB0aXRsZToge1xuICAgIHR5cGU6IHN0cmluZyxcbiAgICBcIiR0XCI6IHN0cmluZyxcbiAgfSxcbiAgY29udGVudDoge1xuICAgIHR5cGU6IHN0cmluZyxcbiAgICBcIiR0XCI6IHN0cmluZyxcbiAgfSxcbiAgZ3N4JHR5cGU6IHtcbiAgICAkdDogVHJhbnNsYXRpb25Sb3dUeXBlLFxuICB9XG4gIGdzeCRpZDoge1xuICAgICR0OiBzdHJpbmcsXG4gIH1cbiAgZ3N4JGVuYXU6IHtcbiAgICAkdDogc3RyaW5nLFxuICB9LFxuICBnc3gkZW51czoge1xuICAgICR0OiBzdHJpbmcsXG4gIH0sXG4gIGdzeCRndWppbjoge1xuICAgICR0OiBzdHJpbmcsXG4gIH0sXG4gIGdzeCRoaWluOiB7XG4gICAgJHQ6IHN0cmluZyxcbiAgfSxcbiAgZ3N4JHRlc3R1cHBlcjoge1xuICAgICR0OiBzdHJpbmcsXG4gIH0sXG4gIGdzeCRmcmZyOiB7XG4gICAgJHQ6IHN0cmluZyxcbiAgfSxcbiAgZ3N4JGVzZXM6IHtcbiAgICAkdDogc3RyaW5nLFxuICB9LFxufVxuXG5leHBvcnQgZW51bSBUcmFuc2xhdGlvblJvd1R5cGUge1xuICBzdHJpbmcgPSAnc3RyaW5nJyxcbiAgZnVuY3Rpb24gPSAnZnVuY3Rpb24nLFxufVxuXG5leHBvcnQgdHlwZSBUcmFuc2xhdGlvblJvdyA9IHtcbiAgaWQ6IHN0cmluZyxcbiAgdHlwZTogVHJhbnNsYXRpb25Sb3dUeXBlLFxuICBlbl9BVTogc3RyaW5nLFxuICBlbl9VUzogc3RyaW5nLFxuICBndWpfSU46IHN0cmluZyxcbiAgaGlfSU46IHN0cmluZyxcbiAgdGVzdF9VUFBFUjogc3RyaW5nLFxuICBmcl9GUjogc3RyaW5nLFxuICBlc19FUzogc3RyaW5nLFxufVxuXG5leHBvcnQgdHlwZSBUcmFuc2xhdGlvbkNvbHVtbiA9IHtcbiAgW2luZGV4OiBzdHJpbmddOiBbc3RyaW5nLCBUcmFuc2xhdGlvblJvd1R5cGVdXG59XG5cblxuZnVuY3Rpb24gd3JpdGVGaWxlKHBhdGg6c3RyaW5nLCBjb250ZW50czpzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBmcy53cml0ZUZpbGUocGF0aCwgY29udGVudHMsIChlcnI6IGFueSkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICB9XG5cbiAgICAgIHJlc29sdmUoKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cblxuZnVuY3Rpb24gcnVuKCkge1xuICAvL2h0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kL2UvMlBBQ1gtMXZTSHA2dV9XWE0xOE5COVJxUGZpYUt1Z0hkVF96aEhQNU5RbFpZU3R6UkpmbndGSlBsZndUU1l0QUdKdlAxYXh2aFo4V2lmWUpjRThSQUovcHViaHRtbFxuICBjb25zdCBzaGVldHNJZCA9IFwiMTAyekxxRVdqNHhscXFOZ1ZVRkNpTUxxZGN2YUxZNkdudFMxeG1sSGRBRThcIlxuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9zcHJlYWRzaGVldHMuZ29vZ2xlLmNvbS9mZWVkcy9saXN0LyR7c2hlZXRzSWR9L2RlZmF1bHQvcHVibGljL3ZhbHVlcz9hbHQ9anNvbjtgXG5cbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmwsXG4gICAgcXM6IHsgYWx0OiAnanNvbicgfSxcbiAgICBoZWFkZXJzOlxuICAgIHtcbiAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJ1xuICAgIH0sXG4gICAganNvbjogdHJ1ZSxcbiAgfTtcbiAgcmV0dXJuIHJlcXVlc3Qob3B0aW9ucylcbiAgLnRoZW4oKHJlc3BvbnNlOiBTaGVldHNSZXNwb25zZSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmZlZWQudGl0bGUpO1xuICAgIGNvbnN0IHBlclJvd1RyYW5zbGF0aW9uczogVHJhbnNsYXRpb25Sb3dbXSA9IFtdO1xuXG4gICAgcmVzcG9uc2UuZmVlZC5lbnRyeS5mb3JFYWNoKChyOiBTaGVldHNSb3cpID0+IHtcbiAgICAgIGNvbnN0IHJvdzogVHJhbnNsYXRpb25Sb3cgPSB7XG4gICAgICAgIGlkOiByLnRpdGxlLiR0LFxuICAgICAgICB0eXBlOiByLmdzeCR0eXBlLiR0LFxuICAgICAgICBlbl9BVTogci5nc3gkZW5hdS4kdCxcbiAgICAgICAgZW5fVVM6IHIuZ3N4JGVudXMuJHQsXG4gICAgICAgIGd1al9JTjogci5nc3gkZ3VqaW4uJHQsXG4gICAgICAgIGhpX0lOOiByLmdzeCRoaWluLiR0LFxuICAgICAgICB0ZXN0X1VQUEVSOiByLmdzeCR0ZXN0dXBwZXIuJHQsXG4gICAgICAgIGZyX0ZSOiByLmdzeCRmcmZyLiR0LFxuICAgICAgICBlc19FUzogci5nc3gkZXNlcy4kdCxcblxuICAgICAgfTtcbiAgICAgIHBlclJvd1RyYW5zbGF0aW9ucy5wdXNoKHJvdyk7XG4gICAgfSk7XG5cbiAgICAvL05vdyB0aGF0IHdlIGhhdmUgdGhlIHJvd3MsIHdyaXRlIHRoZSBmaWxlcyFcbiAgICBjb25zdCBlbl9BVTogVHJhbnNsYXRpb25Db2x1bW4gPSB7fTtcbiAgICBjb25zdCBlbl9VUzogVHJhbnNsYXRpb25Db2x1bW4gPSB7fTtcbiAgICBjb25zdCBndWpfSU46IFRyYW5zbGF0aW9uQ29sdW1uID0ge307XG4gICAgY29uc3QgaGlfSU46IFRyYW5zbGF0aW9uQ29sdW1uID0ge307XG4gICAgY29uc3QgZnJfRlI6IFRyYW5zbGF0aW9uQ29sdW1uID0ge307XG4gICAgY29uc3QgZXNfRVM6IFRyYW5zbGF0aW9uQ29sdW1uID0ge307XG4gICAgY29uc3QgdGVzdF9VUFBFUjogVHJhbnNsYXRpb25Db2x1bW4gPSB7fTtcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMuZm9yRWFjaChyb3cgPT4gZW5fQVVbcm93LmlkXSA9IFtyb3cuZW5fQVUsIHJvdy50eXBlXSlcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMuZm9yRWFjaChyb3cgPT4gZW5fVVNbcm93LmlkXSA9IFtyb3cuZW5fVVMsIHJvdy50eXBlXSlcbiAgICBwZXJSb3dUcmFuc2xhdGlvbnMuZm9yRWFjaChyb3cgPT4gZ3VqX0lOW3Jvdy5pZF0gPSBbcm93Lmd1al9JTiwgcm93LnR5cGVdKVxuICAgIHBlclJvd1RyYW5zbGF0aW9ucy5mb3JFYWNoKHJvdyA9PiBoaV9JTltyb3cuaWRdID0gW3Jvdy5oaV9JTiwgcm93LnR5cGVdKVxuICAgIHBlclJvd1RyYW5zbGF0aW9ucy5mb3JFYWNoKHJvdyA9PiBmcl9GUltyb3cuaWRdID0gW3Jvdy5mcl9GUiwgcm93LnR5cGVdKVxuICAgIHBlclJvd1RyYW5zbGF0aW9ucy5mb3JFYWNoKHJvdyA9PiBlc19FU1tyb3cuaWRdID0gW3Jvdy5lc19FUywgcm93LnR5cGVdKVxuICAgIHBlclJvd1RyYW5zbGF0aW9ucy5mb3JFYWNoKHJvdyA9PiB0ZXN0X1VQUEVSW3Jvdy5pZF0gPSBbcm93LnRlc3RfVVBQRVIsIHJvdy50eXBlXSlcblxuICAgIGNvbnN0IGVuX0FVX2ZpbGUgPSBmaWxlRm9yVHJhbnNsYXRpb25zKFRyYW5zbGF0aW9uRW51bS5lbl9BVSwgZW5fQVUpO1xuICAgIGNvbnN0IGVuX1VTX2ZpbGUgPSBmaWxlRm9yVHJhbnNsYXRpb25zKFRyYW5zbGF0aW9uRW51bS5lbl9VUywgZW5fVVMpO1xuICAgIGNvbnN0IHVqX0lOX2ZpbGUgPSBmaWxlRm9yVHJhbnNsYXRpb25zKFRyYW5zbGF0aW9uRW51bS5ndWpfSU4sIGd1al9JTik7XG4gICAgY29uc3QgaGlfSU5fZmlsZSA9IGZpbGVGb3JUcmFuc2xhdGlvbnMoVHJhbnNsYXRpb25FbnVtLmhpX0lOLCBoaV9JTik7XG4gICAgY29uc3QgdGVzdF9VUFBFUl9maWxlID0gZmlsZUZvclRyYW5zbGF0aW9ucyhUcmFuc2xhdGlvbkVudW0udGVzdF9VUFBFUiwgdGVzdF9VUFBFUik7XG4gICAgY29uc3QgZnJfRlJfZmlsZSA9IGZpbGVGb3JUcmFuc2xhdGlvbnMoVHJhbnNsYXRpb25FbnVtLmZyX0ZSLCBmcl9GUik7XG4gICAgY29uc3QgZXNfRVNfZmlsZSA9IGZpbGVGb3JUcmFuc2xhdGlvbnMoVHJhbnNsYXRpb25FbnVtLmVzX0VTLCBlc19FUyk7XG5cblxuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgIHdyaXRlRmlsZSgnLi9zcmMvY29tbW9uL2VuX0FVLnRzJywgZW5fQVVfZmlsZSksXG4gICAgICB3cml0ZUZpbGUoJy4vc3JjL2NvbW1vbi9lbl9VUy50cycsIGVuX1VTX2ZpbGUpLFxuICAgICAgd3JpdGVGaWxlKCcuL3NyYy9jb21tb24vZ3VqX0lOLnRzJywgdWpfSU5fZmlsZSksXG4gICAgICB3cml0ZUZpbGUoJy4vc3JjL2NvbW1vbi9oaV9JTi50cycsIGhpX0lOX2ZpbGUpLFxuICAgICAgd3JpdGVGaWxlKCcuL3NyYy9jb21tb24vdGVzdF9VUFBFUi50cycsIHRlc3RfVVBQRVJfZmlsZSksXG4gICAgICB3cml0ZUZpbGUoJy4vc3JjL2NvbW1vbi9mcl9GUi50cycsIGZyX0ZSX2ZpbGUpLFxuICAgICAgd3JpdGVGaWxlKCcuL3NyYy9jb21tb24vZXNfRVMudHMnLCBlc19FU19maWxlKSxcbiAgICBdKS5jYXRjaChlcnIgPT4gY29uc29sZS5lcnJvcihlcnIpKVxuICB9KVxuICAuY2F0Y2goKGVycjogYW55KSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xufVxuXG5ydW4oKTsiXX0=